---
layout: post
title: CocoaPodsのDKAudioPlayerのバグ修正がマージされた
post_id: 310
categories: 
- CocoaPods
---

動画の取り方が分からなかったので分かりにくかったらすいません。

iPhoneアプリ開発で音声ファイルを簡単に再生でき、画面にプレイヤー表示が出来る
[DKAudioPlayer](https://github.com/wzbozon/DKAudioPlayer)というCocoaPodsライブラリがあります。

DKAudioPlayerのプレイヤーを表示させた場合、吹き出しで再生時間の現在値と最大値（例： 00:00 / 01:30）が表示されるのですが、プレイヤーを表示された直後になぜか
03:45 / 05:00と一瞬表示されてから音声ファイルの長さにそって
00:00 / 03:12と切り替わりとても不自然な挙動をしていました。

調べたところ、initWithAudioFilePathで初期化時にラベル内に
03:45 / 05:00と設定しかつ吹き出しの位置も
03:45とベタでしていされていました。なので、初期化時に音声ファイル情報を渡しているのでそのデータに基づいて曲の長さを取得し、吹き出しの位置を調整した方が良さそうでしたのでそのように修正し、
[Pull Request](https://github.com/wzbozon/DKAudioPlayer/pull/4)を送ったところ先ほどマージされました。何気に外部の公開リポジトリに対してPRしたのも、マージされたのも初めてだったので嬉しかったです。これで少し便利になりました。